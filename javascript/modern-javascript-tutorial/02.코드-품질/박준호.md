## 바벨
명세서에 등록된 지 얼마 안 된 기능을 사용하다보면, 특정 엔진에서는 해당 기능을 지원하지 않을 때가 있다.
명세서 내 모든 기능을 모든 엔진이 구현하고 있지는 않기 때문이다.

이럴 때 바벨을 사용할 수 있다.

바벨은 트랜스파일러로 모던 자바스크립트 코드를 구 표준을 준수하는 코드로 바꿔준다.  
=> 크로스 브라우징 이슈를 해결할 수 있다.

---


### 바벨의 동작 3단계
1. 파싱(parsing)
2. 변환(transformation)
3. 출력(printing)

#### 1. 파싱(parsing)
기존 소스코드를 읽어낸 뒤, <a href="https://ko.wikipedia.org/wiki/%EC%B6%94%EC%83%81_%EA%B5%AC%EB%AC%B8_%ED%8A%B8%EB%A6%AC" target="_blank">AST(추상구문트리)</a>로 변환한다.  

소스코드를 수정하기 쉬운 구조로 변환해 두는 사전 작업
<br/> <br/> 

#### 2. 변환(transformation)
파싱 단계에서 변환된 AST를 정해진 규칙에 맞게 변경한다.

이 단계에서 모던 자바스크립트 코드가 구 표준 문법으로 변환된다.
<br/> <br/> 

#### 3. 출력(printing)
변환 단계에서 구 표준 문법으로 변환되었지만 아직 AST인 상태이다.
이 단계에서 AST를 다시 소스코드로 변환시켜준다.
<br/> <br/> 

---

### 바벨의 주요 역할
트랜스파일러 & 폴리필
1. 트랜스파일러  
    소스 코드를 한 프로그래밍 언어에서 다른 프로그래밍 언어로 변환해주는 도구.
    
2. 폴리필
    브라우저에서 지원하지 않는 코드를 사용 가능한 코드 조각이나 플러그인으로 변환한 코드를 의미   
    하위 브라우저가 지원하는 자바스크립트 코드를 사용해 자바스크립트의 최신 기능을 똑같이 구현하는 방식이다

    Polyfill 스크립트가 많아지면 웹 성능이 나빠지며,  

    Babel의 @babel/preset-env 스마트 프리셋을 이용하여 포함할 Polyfill 스크립트의 범위를 지정할 수 있지만,  
    이 경우에도 최신 브라우저는 오래된 브라우저를 위한 Polyfill을 내려받는다.

    User-agent에 따라 동적으로 Polyfill 스크립트를 생성할 수 있다.  
    이로써 최신 브라우저에서 내려받는 Polyfill 스크립트를 거의 없게 만들 수 있다.

    관련 아티클)  
    <a href="https://toss.tech/article/smart-polyfills" target="_blank">똑똑하게 브라우저 Polyfill 관리하기
</a>
<br/><br/>

> **트랜스파일과 폴리필의 차이**    
> 
> 폴리필은 지원하지 않은 기능을 대체할 수 있도록 코드를 추가하는 것이고 트랜스파일은 코드 자체를 이전 버전으로 변환시키는 과정이다.   
> 예를 들어 화살표 함수는 ES6부터 도입된 문법으로 지원하지 않는 브라우저에서 사용하기 위해서는 폴리필을 사용할 수 없고 트랜스파일러를 사용하여 코드 자체를 변환시켜야 한다


